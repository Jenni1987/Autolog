<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>AutoLog | Panel de Control</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- HEADER -->
<div th:replace="fragments :: headerFragment"></div>

<!-- LAYOUT -->
<div class="layout">

	<!-- SIDEBAR -->
	<div th:replace="fragments :: sidebarFragment('dashboard')"></div>

    <!-- MAIN CONTENT -->
    <main class="content">

        <h1>Panel de Control</h1>
        <p class="subtitle">Resumen general del sistema AutoLog</p>

        <!-- STATS -->
        <section class="cards">
            <div class="card">
                <h3>Vehículos registrados</h3>
                <p class="big" th:text="${dashboard.vehicleCount}"></p>
            </div>

            <div class="card">
                <h3>Mantenimientos</h3>
                <p class="big" th:text="${dashboard.maintenanceCount}"></p>
            </div>
            
            <div class="card">
                <h3>Reparaciones</h3>
                <p class="big" th:text="${dashboard.repairCount}"></p>
            </div>
            
            <div class="card">
                <h3>Inspecciones</h3>
                <p class="big" th:text="${dashboard.inspectionCount}"></p>
            </div>
            
            <div class="card">
                <h3>Gasto Anual (<span th:text="${#dates.format(#dates.createNow(),'yyyy')}"></span>)</h3>
                <p class="big warning" th:text="${dashboard.annualCost} + ' €'"></p>
            </div>

            <div class="card">
                <h3>Documentos</h3>
                <p class="big" th:text="${dashboard.documentCount}"></p>
            </div>
        </section>

        <!-- RECENT ACTIVITY -->
        <section class="panel">
            <h2>Actividad reciente</h2>
            <ul class="activity">
                <li th:each="op : ${dashboard.recentOperations}">
                    <span th:text="${op.type}"></span> – 
                    Vehículo <span th:text="${op.vehicle.plate}"></span> 
                    (<span th:text="${op.date}"></span>)
                </li>
            </ul>
        </section>

    </main>
</div>

</body>
</html>
