<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
	<head>
	    <meta charset="UTF-8">
	    <title>AutoLog | Operaci√≥n</title>
	    <link rel="stylesheet" th:href="@{/css/styles.css}">
	</head>
	<body>
	
		<div th:replace="fragments :: headerFragment"></div>
	
		<div class="layout">
	
			<div th:replace="fragments :: sidebarFragment('operations')"></div>
	
	
		    <main class="content">
		        <div class="form-card">
		            <h1 th:text="${operation.id != null} ? 'Editar Operaci√≥n' : 'Nueva Operaci√≥n'"></h1>
					<div class="empty-state"
					     th:if="${vehicles == null or #lists.isEmpty(vehicles)}">

					    <p><b>No dispone de veh√≠culos asociados</b></p>
					    <p>Para poder crear una operaci√≥n, primero debe registrar un veh√≠culo.</p>

					    <a th:href="@{/vehicles/new}" class="btn btn-new">
					        <span class="icon-plus">+</span> Nuevo Veh√≠culo
					    </a>
					</div>

					<form th:if="${vehicles != null and !#lists.isEmpty(vehicles)}"
					      th:action="@{/operations/save}"
					      th:object="${operation}"
					      method="post">

					    <input type="hidden" th:field="*{id}" />

					    <div class="form-group">
					        <label>Veh√≠culo</label>
					        <select th:field="*{vehicle.id}" required>
					            <option value="">Seleccione un veh√≠culo</option>
					            <option th:each="v : ${vehicles}"
					                    th:value="${v.id}"
					                    th:text="${v.brand + ' ' + v.model + ' (' + v.plate + ')'}">
					            </option>
					        </select>
					        <div class="txt-danger"
					             th:if="${#fields.hasErrors('vehicle')}"
					             th:errors="*{vehicle}">
					        </div>
					    </div>

					    <div class="form-group">
					        <label>Tipo</label>
					        <select th:field="*{type}" required>
					            <option value="">Seleccione tipo</option>
					            <option th:value="MANTENIMIENTO">Mantenimiento</option>
					            <option th:value="REPARACION">Reparaci√≥n</option>
					            <option th:value="INSPECCION">Inspecci√≥n</option>
					        </select>
					        <div class="txt-danger"
					             th:if="${#fields.hasErrors('type')}"
					             th:errors="*{type}">
					        </div>
					    </div>

					    <div class="form-group">
					        <label>Fecha</label>
					        <input type="date" th:field="*{date}" required>
					        <div class="txt-danger"
					             th:if="${#fields.hasErrors('date')}"
					             th:errors="*{date}">
					        </div>
					    </div>

					    <div class="form-group">
					        <label>Lugar</label>
					        <input type="text" th:field="*{place}" required>
					        <div class="txt-danger"
					             th:if="${#fields.hasErrors('place')}"
					             th:errors="*{place}">
					        </div>
					    </div>

					    <div class="form-group">
					        <label>Coste (‚Ç¨)</label>
					        <input type="number" th:field="*{cost}" step="0.01" min="0">
					        <div class="txt-danger"
					             th:if="${#fields.hasErrors('cost')}"
					             th:errors="*{cost}">
					        </div>
					    </div>

					    <div class="form-group">
					        <label>Descripci√≥n</label>
					        <textarea th:field="*{description}"
					                  class="form-input"
					                  rows="5"
					                  placeholder="Descripci√≥n de la operaci√≥n"></textarea>
					        <div class="txt-danger"
					             th:if="${#fields.hasErrors('description')}"
					             th:errors="*{description}">
					        </div>
					    </div>

					    <button type="submit" class="btn btn-new">
					        üíæ Guardar
					    </button>
					</form>
		        </div>
		    </main>
		</div>
	</body>
</html>
